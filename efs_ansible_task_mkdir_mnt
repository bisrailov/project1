---
- name: create a dir for efs
  hosts: 
  become: true

  tasks:
  - name: Create a directory if it does not exist
    file:
    path: /mnt/myefsdata/
    state: directory
    mode: '0755'

  - name: Recursively change ownership of a directory
    file:
    path: /mnt/myefsdata
    state: directory
    recurse: yes
    owner: ec2-user
    group: ec2-user

    #task to mount an efs
    #mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2 fs-xxxxxxxx.efs.eu-west-1.amazonaws.com:/ /mnt/myefsdata